*{box-sizing:border-box;margin:0;padding:0}:root{--primary-color: #6366f1;--bg-color: #f8fafc;--text-color: #1e293b;--border-color: #e2e8f0;--shadow: 0 1px 3px rgba(0, 0, 0, .1)}body{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,sans-serif;background:var(--bg-color);color:var(--text-color);line-height:1.6;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;overflow-x:hidden}#app{display:flex;flex-direction:column;height:100vh;max-width:480px;margin:0 auto;background:#fff;box-shadow:0 0 20px #0000001a}header{background:var(--primary-color);color:#fff;padding:1rem;text-align:center;box-shadow:var(--shadow)}header h1{font-size:1.5rem;font-weight:700}main{flex:1;overflow-y:auto;padding:1rem}.screen{display:none}.screen.active{display:block;animation:fadeIn .3s ease-in}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.screen h2{margin-bottom:1rem;color:var(--primary-color)}.screen p{margin-bottom:.5rem;color:#64748b}footer{display:flex;justify-content:space-around;background:#fff;border-top:1px solid var(--border-color);padding:.75rem;box-shadow:0 -2px 10px #0000000d}.nav-btn{flex:1;padding:.75rem;background:transparent;border:none;color:#64748b;font-size:.875rem;cursor:pointer;transition:all .2s;text-align:center;border-radius:.5rem}.nav-btn:hover{background:var(--bg-color)}.nav-btn.active{color:var(--primary-color);font-weight:600;background:#eef2ff}.nav-btn:active{transform:scale(.95)}@media(min-width:768px){header h1{font-size:2rem}.nav-btn{font-size:1rem}}#game-container{height:100%;display:flex;flex-direction:column}.game-header{display:flex;justify-content:space-between;align-items:center;gap:.5rem;flex-wrap:wrap;padding:.5rem .75rem;background:var(--bg-color);border:1px solid var(--border-color);border-radius:12px;margin-bottom:1rem}.game-header .back-btn{padding:.45rem .85rem;background:#fff;color:var(--text-color);border:1px solid var(--border-color);border-radius:999px;font-size:.875rem;font-weight:600;cursor:pointer;transition:background .2s,border-color .2s,transform .2s}.game-header .back-btn:hover{background:#eef2ff;border-color:#c7d2fe}.game-header .back-btn:active{transform:scale(.97)}.moves-counter{font-size:1.125rem;font-weight:600;color:var(--primary-color)}.game-header .reset-btn{padding:.5rem 1rem;background:var(--primary-color);color:#fff;border:none;border-radius:999px;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s}.game-header .reset-btn:hover{background:#4f46e5}.game-header .reset-btn:active{transform:scale(.95)}.game-grid{display:grid;grid-template-columns:repeat(6,1fr);gap:6px;aspect-ratio:1;padding:10px;background:#1a1a2e;border-radius:12px;box-shadow:0 4px 20px #0000004d}.cell{aspect-ratio:1;border-radius:8px;background:#16213e;display:flex;align-items:center;justify-content:center;font-size:1.5rem;font-weight:700;cursor:pointer;transition:transform .15s,background .15s;-webkit-user-select:none;user-select:none;-webkit-tap-highlight-color:transparent}.cell:hover{background:#1f2b4a}.cell:active{transform:scale(.92)}@keyframes pop{0%{transform:scale(1)}50%{transform:scale(1.25)}to{transform:scale(1)}}.cell.merging{animation:pop .25s ease-out}.level-info{padding:.35rem .75rem;background:#eef2ff;border:1px solid #c7d2fe;border-radius:999px;font-size:.875rem;font-weight:600;color:#3730a3}.orders-panel{display:flex;gap:.5rem;margin-bottom:.75rem;flex-wrap:wrap}.order-item{background:#1a1a2e;padding:.4rem .75rem;border-radius:8px;display:flex;align-items:center;gap:.5rem;font-size:.875rem}.order-item.complete{opacity:.5}.order-item.complete .order-progress{text-decoration:line-through}.order-tier{font-weight:700;font-size:1rem}.order-progress{color:#94a3b8;font-weight:500}.game-grid-wrapper{position:relative;flex:1}.game-overlay{position:absolute;inset:0;background:#000000e6;display:flex;flex-direction:column;align-items:center;justify-content:center;border-radius:12px;z-index:10;animation:fadeIn .3s ease-out}.overlay-content{text-align:center;padding:2rem}.overlay-title{font-size:1.75rem;font-weight:700;color:#fff;margin-bottom:.5rem}.game-overlay.win .overlay-title{color:#0f0;text-shadow:0 0 20px rgba(0,255,0,.5)}.game-overlay.lose .overlay-title{color:#f44;text-shadow:0 0 20px rgba(255,68,68,.5)}.overlay-subtitle{color:#94a3b8;margin-bottom:1.5rem}.overlay-btn{display:block;width:100%;padding:.75rem 1.5rem;margin-top:.5rem;background:#374151;color:#fff;border:none;border-radius:8px;font-size:1rem;font-weight:500;cursor:pointer;transition:all .2s}.overlay-btn.primary{background:var(--primary-color)}.overlay-btn:hover{transform:scale(1.02)}.overlay-btn:active{transform:scale(.98)}.level-select-screen{text-align:center}.level-select-screen h2{margin-bottom:1.5rem}.level-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:.5rem}.level-btn{aspect-ratio:1;background:#1a1a2e;color:#fff;border:none;border-radius:8px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .2s;position:relative;display:flex;align-items:center;justify-content:center}.level-btn:hover{background:var(--primary-color);transform:scale(1.05)}.level-btn:active{transform:scale(.95)}.level-btn.completed{background:#22c55e33;border:2px solid rgba(34,197,94,.5)}.level-btn.completed:hover{background:#22c55e4d;border-color:#22c55eb3}.level-number{display:block}.completion-check{position:absolute;top:4px;right:4px;font-size:.75rem;color:#22c55e;background:#22c55e33;border-radius:50%;width:18px;height:18px;display:flex;align-items:center;justify-content:center;font-weight:700}#editor-container{height:100%}.editor-container{display:flex;flex-direction:column;gap:1rem}.editor-title{color:var(--primary-color);margin-bottom:.5rem}.editor-section{background:#f8fafc;padding:1rem;border-radius:8px}.editor-label{display:block;font-size:.875rem;font-weight:600;color:#64748b;margin-bottom:.5rem}.editor-select,.editor-input{width:100%;padding:.75rem;border:1px solid var(--border-color);border-radius:8px;font-size:1rem;background:#fff}.editor-select:focus,.editor-input:focus{outline:none;border-color:var(--primary-color)}.orders-list{display:flex;flex-direction:column;gap:.5rem;margin-bottom:.75rem}.order-row{display:flex;gap:.5rem;align-items:flex-end}.order-field{flex:1}.order-field-label{display:block;font-size:.75rem;color:#64748b;margin-bottom:.25rem}.order-row .editor-input{padding:.5rem}.editor-btn{padding:.75rem 1rem;background:#e2e8f0;color:var(--text-color);border:none;border-radius:8px;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s}.editor-btn:hover{background:#cbd5e1}.editor-btn:active{transform:scale(.98)}.editor-btn:disabled{opacity:.5;cursor:not-allowed}.editor-btn.primary{background:var(--primary-color);color:#fff}.editor-btn.primary:hover{background:#4f46e5}.editor-btn.success{background:#10b981;color:#fff}.editor-btn.success:hover{background:#059669}.editor-btn.danger{background:#ef4444;color:#fff;padding:.5rem .75rem}.editor-btn.danger:hover{background:#dc2626}.add-order-btn{width:100%}.editor-actions{display:flex;gap:.5rem}.editor-actions .editor-btn{flex:1}.play-section{margin-top:.5rem}.play-section .editor-btn{width:100%;padding:1rem;font-size:1rem}.editor-toast{position:fixed;bottom:5rem;left:50%;transform:translate(-50%);background:#1e293b;color:#fff;padding:.75rem 1.5rem;border-radius:8px;font-size:.875rem;animation:slideUp .3s ease-out;z-index:100}@keyframes slideUp{0%{opacity:0;transform:translate(-50%) translateY(20px)}to{opacity:1;transform:translate(-50%) translateY(0)}}.insights-container{display:flex;flex-direction:column;gap:1rem}.insights-title{color:var(--primary-color);margin-bottom:.5rem}.insights-overview{background:#f8fafc;padding:1rem;border-radius:8px}.insights-stat{display:flex;justify-content:space-between;padding:.5rem 0;border-bottom:1px solid var(--border-color)}.insights-stat:last-child{border-bottom:none}.stat-label{font-size:.875rem;color:#64748b}.stat-value{font-weight:600;color:var(--text-color)}.insights-section{background:#f8fafc;padding:1rem;border-radius:8px}.insights-section h3{margin:0 0 1rem;color:var(--text-color);font-size:1.125rem}.insights-level-select{width:100%;padding:.75rem;border:1px solid var(--border-color);border-radius:8px;font-size:1rem;background:#fff;margin-bottom:1rem;cursor:pointer}.insights-level-select:focus{outline:none;border-color:var(--primary-color)}.insights-level-details{display:flex;flex-direction:column;gap:.75rem}.insights-metric{display:flex;justify-content:space-between;align-items:center;padding:.75rem;background:#fff;border-radius:6px;border:1px solid var(--border-color)}.metric-label{font-size:.875rem;color:#64748b;font-weight:500}.metric-value{font-size:1.125rem;font-weight:700;color:var(--primary-color)}.fail-reasons-breakdown{background:#fff;padding:.75rem;border-radius:6px;border:1px solid var(--border-color)}.fail-reason-item{display:flex;justify-content:space-between;padding:.5rem 0;font-size:.875rem}.fail-reason-item:last-child{border-bottom:none}.fail-reason-label{color:#64748b}.fail-reason-count{font-weight:600;color:#ef4444}.insights-actions{display:flex;flex-direction:column;gap:.5rem}.insights-btn{padding:.75rem 1rem;background:#e2e8f0;color:var(--text-color);border:none;border-radius:8px;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s}.insights-btn:hover{background:#cbd5e1}.insights-btn:active{transform:scale(.98)}.insights-btn.primary{background:var(--primary-color);color:#fff}.insights-btn.primary:hover{background:#4f46e5}.insights-btn.danger{background:#ef4444;color:#fff}.insights-btn.danger:hover{background:#dc2626}.insights-empty-state{text-align:center;padding:2rem;color:#64748b}.insights-empty-state h3{margin-bottom:.5rem;color:var(--text-color)}.insights-toast{position:fixed;bottom:5rem;left:50%;transform:translate(-50%);background:#1e293b;color:#fff;padding:.75rem 1.5rem;border-radius:8px;font-size:.875rem;animation:slideUp .3s ease-out;z-index:100}.tutorial-overlay{position:fixed;inset:0;background:#000000f2;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:100;animation:fadeIn .3s ease-out}.tutorial-content{text-align:center;padding:2rem;max-width:320px}.tutorial-step-icon{width:80px;height:80px;border-radius:50%;background:linear-gradient(135deg,#6366f1,#8b5cf6);display:flex;align-items:center;justify-content:center;margin:0 auto 1.5rem;font-size:2rem;font-weight:700;color:#fff;box-shadow:0 0 30px #6366f180}.tutorial-title{font-size:1.5rem;font-weight:700;color:#fff;margin-bottom:.75rem}.tutorial-desc{font-size:1rem;color:#94a3b8;margin-bottom:2rem;line-height:1.5}.tutorial-dots{display:flex;gap:.5rem;justify-content:center;margin-bottom:2rem}.tutorial-dot{width:10px;height:10px;border-radius:50%;background:#374151;transition:all .2s}.tutorial-dot.active{background:#6366f1;transform:scale(1.2)}.tutorial-btn{width:100%;padding:1rem;background:#6366f1;color:#fff;border:none;border-radius:12px;font-size:1rem;font-weight:600;cursor:pointer;transition:all .2s}.tutorial-btn:hover{background:#4f46e5}.tutorial-btn:active{transform:scale(.98)}.tutorial-skip{margin-top:1rem;background:transparent;border:none;color:#64748b;font-size:.875rem;cursor:pointer;text-decoration:underline}.tutorial-skip:hover{color:#94a3b8}header{position:relative;background:linear-gradient(135deg,#6366f1,#4f46e5);box-shadow:0 4px 20px #6366f14d}.sound-toggle{position:absolute;right:1rem;top:50%;transform:translateY(-50%);background:#fff3;border:none;border-radius:8px;width:40px;height:40px;cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center}.sound-toggle:hover{background:#ffffff4d}.sound-toggle:active{transform:translateY(-50%) scale(.95)}.sound-icon{font-size:1.25rem}.win-stats{display:flex;justify-content:center;gap:2rem;margin:1.5rem 0}.win-stat{display:flex;flex-direction:column;align-items:center}.win-stat-value{font-size:2rem;font-weight:800;color:#0f0;text-shadow:0 0 20px rgba(0,255,0,.6)}.win-stat-label{font-size:.75rem;color:#64748b;text-transform:uppercase;letter-spacing:.05em;margin-top:.25rem}.overlay-btn.share-btn{background:transparent;border:1px solid rgba(255,255,255,.2);color:#94a3b8;margin-top:.75rem}.overlay-btn.share-btn:hover{border-color:#fff6;color:#fff;background:#ffffff1a}.share-toast{position:absolute;bottom:1rem;left:50%;transform:translate(-50%);background:#000000e6;color:#0f0;padding:.5rem 1rem;border-radius:6px;font-size:.875rem;animation:slideUp .3s ease-out;z-index:20}header h1{font-size:1.75rem;font-weight:800;letter-spacing:-.025em}.game-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem;padding-bottom:.75rem;border-bottom:1px solid rgba(255,255,255,.1);gap:.5rem;flex-wrap:wrap}.level-info{font-size:1rem;font-weight:700;color:#fff;text-shadow:0 0 10px rgba(255,255,255,.3)}.moves-counter{font-size:1.125rem;font-weight:700;color:#0f0;text-shadow:0 0 10px rgba(0,255,0,.5)}.reset-btn,.back-btn{padding:.625rem 1.25rem;background:#ffffff1a;color:#fff;border:1px solid rgba(255,255,255,.2);border-radius:10px;font-size:.875rem;font-weight:500;cursor:pointer;transition:all .2s;-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}.reset-btn:hover,.back-btn:hover{background:#fff3;border-color:#ffffff4d}.reset-btn:active,.back-btn:active{transform:scale(.98)}.orders-panel{gap:.75rem;margin-bottom:1rem}.order-item{background:#1a1a2ecc;padding:.5rem 1rem;border-radius:10px;gap:.625rem;font-size:.9375rem;border:1px solid rgba(255,255,255,.1);transition:all .2s}.order-item.complete{opacity:.4;border-color:#00ff004d}.level-select-screen h2{font-size:1.5rem;color:#fff;text-shadow:0 0 20px rgba(99,102,241,.5);margin-bottom:2rem}.level-grid{gap:.75rem}.level-btn{background:linear-gradient(135deg,#1a1a2e,#16213e);border:1px solid rgba(255,255,255,.1);border-radius:12px;font-size:1.125rem;font-weight:700}.level-btn:hover{background:linear-gradient(135deg,#6366f1,#4f46e5);border-color:#6366f1;transform:scale(1.08);box-shadow:0 0 20px #6366f166}
