@import "tailwindcss";

@custom-variant dark (&:where(.dark, .dark *));

@theme {
  --color-primary: #ee2b8c;
  --color-accent: #6366f1;
  --color-background-light: #f8f6f7;
  --color-background-dark: #221019;

  --font-display: "Spline Sans", sans-serif;
  --font-body: "Noto Sans", sans-serif;

  --radius: 1rem;
  --radius-lg: 2rem;
  --radius-xl: 3rem;

  --shadow-soft: 0 10px 40px -10px rgba(238, 43, 140, 0.2);
  --shadow-glow: 0 0 30px rgba(238, 43, 140, 0.5);
  --shadow-inner-light: inset 0 2px 4px 0 rgba(255, 255, 255, 0.3);

  --animate-float: float 6s ease-in-out infinite;
  --animate-pulse-slow: pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite;

  --blur-100: 100px;
  --blur-120: 120px;
}

@layer base {
  * {
    box-sizing: border-box;
  }

  body {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    overflow-x: hidden;
  }

  #app {
    @apply flex flex-col h-screen max-w-[480px] mx-auto;
  }
}

@layer components {

  /* Screen transitions */
  .screen {
    @apply hidden;
  }

  .screen.active {
    @apply block;
    animation: fadeIn 0.3s ease-in;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(10px);
    }

    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .animate-fade-in {
    animation: fadeIn 0.3s ease-out;
  }

  /* Game-specific styles that must be preserved */

  /* Game Grid - Dark theme preserved */
  .game-grid {
    @apply grid gap-[6px] aspect-square p-[10px] rounded-xl;
    grid-template-columns: repeat(6, 1fr);
    background: #1a1a2e;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
  }

  /* Grid Cells - Dark theme with tier colors */
  .cell {
    @apply aspect-square rounded-lg flex items-center justify-center text-2xl font-bold cursor-pointer select-none;
    background: #16213e;
    transition: transform 0.15s, background 0.15s;
    -webkit-tap-highlight-color: transparent;
  }

  .cell:hover {
    background: #1f2b4a;
  }

  .cell:active {
    transform: scale(0.92);
  }

  /* Merge Animation - CRITICAL: Must be preserved */
  @keyframes pop {
    0% {
      transform: scale(1);
    }

    50% {
      transform: scale(1.25);
    }

    100% {
      transform: scale(1);
    }
  }

  .cell.merging {
    animation: pop 0.25s ease-out;
  }

  /* Orders Panel */
  .orders-panel {
    @apply flex gap-2 mb-3 flex-wrap;
  }

  .order-item {
    @apply flex items-center gap-2 text-sm;
    background: #232840;
    padding: 0.5rem 0.85rem;
    border-radius: 8px;
    border: 1px solid rgba(255, 255, 255, 0.15);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
  }

  .order-item.complete {
    @apply opacity-50;
  }

  .order-item.complete .order-progress {
    @apply line-through;
  }

  .order-tier {
    @apply font-bold text-base;
  }

  .order-progress {
    @apply text-slate-300 font-medium;
  }

  /* Game Overlay (Win/Lose) */
  .game-overlay {
    @apply absolute inset-0 flex flex-col items-center justify-center rounded-xl z-10;
    background: rgba(0, 0, 0, 0.9);
    animation: fadeIn 0.3s ease-out;
  }

  .overlay-content {
    @apply text-center p-8;
  }

  .overlay-title {
    @apply text-3xl font-bold text-white mb-2;
  }

  .game-overlay.win .overlay-title {
    color: #00ff00;
    text-shadow: 0 0 20px rgba(0, 255, 0, 0.5);
  }

  .game-overlay.lose .overlay-title {
    color: #ff4444;
    text-shadow: 0 0 20px rgba(255, 68, 68, 0.5);
  }

  .overlay-subtitle {
    @apply text-slate-400 mb-6;
  }

  .overlay-btn {
    @apply block w-full px-6 py-3 mt-2 text-white border-none rounded-lg text-base font-medium cursor-pointer transition-transform;
    background: #374151;
  }

  .overlay-btn.primary {
    @apply bg-primary;
  }

  .overlay-btn:hover {
    transform: scale(1.02);
  }

  .overlay-btn:active {
    transform: scale(0.98);
  }

  /* Win Stats */
  .win-stats {
    @apply flex flex-col gap-2 my-4 text-left;
  }

  .stat-row {
    @apply flex justify-between items-center px-4 py-2 rounded-lg;
    background: rgba(255, 255, 255, 0.05);
  }

  .stat-row span:first-child {
    @apply text-slate-400 text-sm;
  }

  .stat-row span:last-child {
    @apply text-white font-semibold;
  }

  /* Toast notifications */
  @keyframes slideUp {
    from {
      opacity: 0;
      transform: translateX(-50%) translateY(20px);
    }

    to {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }
  }

  .editor-toast,
  .insights-toast,
  .share-toast {
    @apply fixed left-1/2 bg-slate-800 text-white px-6 py-3 rounded-lg text-sm z-[100];
    bottom: 5rem;
    transform: translateX(-50%);
    animation: slideUp 0.3s ease-out;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
    border: 1px solid rgba(255, 255, 255, 0.2);
  }

  /* Level select modal (will be used in main.ts) */
  .level-modal {
    @apply fixed inset-0 flex items-center justify-center z-50;
    background: rgba(0, 0, 0, 0.9);
    animation: fadeIn 0.3s ease-out;
  }

  /* Insights metrics */
  .insights-stat {
    @apply flex justify-between py-2 border-b border-gray-200 dark:border-gray-700;
  }

  .insights-stat:last-child {
    @apply border-b-0;
  }

  .stat-label {
    @apply text-sm text-gray-600 dark:text-gray-400;
  }

  .stat-value {
    @apply font-semibold text-gray-900 dark:text-white;
  }

  .metric-label {
    @apply text-sm text-gray-600 dark:text-gray-400 font-medium;
  }

  .metric-value {
    @apply text-lg font-bold text-primary;
  }

  /* Editor specific styles */
  .orders-list {
    @apply flex flex-col gap-2 mb-3;
  }

  .order-row {
    @apply flex gap-2 items-end;
  }

  .order-field {
    @apply flex-1;
  }

  .order-field-label {
    @apply block text-xs text-gray-600 dark:text-gray-400 mb-1;
  }

  /* Editor specific styles */
  .editor-container {
    @apply px-6 py-8 bg-gradient-to-b from-gray-50 to-white dark:from-[#1a1a2e] dark:to-[#221019] min-h-screen pb-32;
  }

  .editor-title {
    @apply text-3xl font-black text-gray-900 dark:text-white mb-6 text-center;
  }

  .editor-section {
    @apply mb-6 bg-white dark:bg-[#2A1821] p-5 rounded-2xl border border-gray-200 dark:border-white/10 shadow-sm;
  }

  .editor-label {
    @apply block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2;
  }

  .editor-select {
    @apply w-full px-4 py-3 bg-gray-50 dark:bg-[#1a1a2e] border border-gray-300 dark:border-white/20 rounded-xl text-gray-900 dark:text-white font-medium focus:ring-2 focus:ring-primary focus:border-primary transition-all;
  }

  .editor-input {
    @apply w-full px-4 py-3 bg-gray-50 dark:bg-[#1a1a2e] border border-gray-300 dark:border-white/20 rounded-xl text-gray-900 dark:text-white font-medium focus:ring-2 focus:ring-primary focus:border-primary transition-all;
  }

  .editor-btn {
    @apply px-6 py-3 rounded-xl font-bold transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .editor-btn.primary {
    @apply bg-primary hover:bg-primary/90 text-white shadow-md;
  }

  .editor-btn.success {
    @apply bg-green-600 hover:bg-green-700 text-white shadow-md w-full;
  }

  .editor-btn.danger {
    @apply bg-red-500 hover:bg-red-600 text-white text-sm px-3 py-1;
  }

  .editor-btn:not(.primary):not(.success):not(.danger) {
    @apply bg-gray-200 dark:bg-white/10 hover:bg-gray-300 dark:hover:bg-white/20 text-gray-700 dark:text-white;
  }

  .editor-actions {
    @apply flex gap-3 mb-6;
  }

  .editor-actions .editor-btn {
    @apply flex-1;
  }

  .play-section {
    @apply border-2 border-primary/30 bg-primary/5;
  }

  /* Tutorial overlay */
  .tutorial-overlay {
    @apply fixed inset-0 flex items-center justify-center z-50;
    background: rgba(0, 0, 0, 0.95);
    animation: fadeIn 0.3s ease-out;
  }
}

@layer utilities {

  /* Custom utility classes if needed */
  .tap-highlight-none {
    -webkit-tap-highlight-color: transparent;
  }
}